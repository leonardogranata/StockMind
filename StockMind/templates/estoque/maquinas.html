{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/maquina_lista.css' %}">
{% endblock %}

{% block content %}
<div class="lista-container">
    <div class="header-section">
        <div class="header-content">   
        <h1 class="page-title">M√°quinas</h1>
        <p class="page-subtitle">Gerencie todas as m√°quinas do sistema</p>
        </div>
        <a href="{% url 'cadastro_maquina' %}" class="btn-adicionar">
            + Nova M√°quina
        </a>
    </div>

    {% if maquinas %}
    <div class="cards-grid">
        {% for maquina in maquinas %}
        <div class="maquina-card">
            <div class="card-header">
                <div class="card-codigo">{{ maquina.codigo }}</div>
                <div class="card-status status-{{ maquina.status|lower|cut:' ' }}">
                    {% if maquina.status == "Ativa" %}
                        ‚úì Ativa
                    {% elif maquina.status == "Em manuten√ß√£o" %}
                        ‚öô Manuten√ß√£o
                    {% else %}
                        ‚úï Inativa
                    {% endif %}
                </div>
            </div>

            <div class="card-body">
                <h3 class="card-title">{{ maquina.nome }}</h3>
                
                {% if maquina.descricao %}
                <p class="card-descricao">{{ maquina.descricao|truncatewords:15 }}</p>
                {% endif %}

                <div class="card-info">
                    {% if maquina.localizacao %}
                    <div class="info-item">
                        <span class="info-icon">üìç</span>
                        <span class="info-text">{{ maquina.localizacao }}</span>
                    </div>
                    {% endif %}

                    {% if maquina.data_aquisicao %}
                    <div class="info-item">
                        <span class="info-icon">üìÖ</span>
                        <span class="info-text">{{ maquina.data_aquisicao|date:"d/m/Y" }}</span>
                    </div>
                    {% endif %}

                    {% if maquina.pecas.count > 0 %}
                    <div class="info-item">
                        <span class="info-icon">üîß</span>
                        <span class="info-text">{{ maquina.pecas.count }} pe√ßa{{ maquina.pecas.count|pluralize:"s" }}</span>
                    </div>
                    {% endif %}
                </div>
            </div>

            <div class="card-actions">
                <a href="{% url 'editar_maquina' maquina.id %}" class="btn-action btn-editar">
                    Editar
                </a>
                <a href="{% url 'excluir_maquina' maquina.id %}" class="btn-action btn-deletar" onclick="return confirm('Tem certeza que deseja deletar esta m√°quina?')">
                    Deletar
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-icon">üè≠</div>
        <h2 class="empty-title">Nenhuma m√°quina cadastrada</h2>
        <p class="empty-text">Comece adicionando sua primeira m√°quina ao sistema</p>
        <a href="{% url 'cadastrar_maquina' %}" class="btn-empty">
            + Cadastrar primeira m√°quina
        </a>
    </div>
    {% endif %}
</div>
{% endblock content %}